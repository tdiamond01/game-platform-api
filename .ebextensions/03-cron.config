files:
  "/etc/cron.d/game-platform":
    mode: "000644"
    owner: root
    group: root
    content: |
      # Run Laravel scheduler every minute
      * * * * * webapp cd /var/app/current && php artisan schedule:run >> /dev/null 2>&1

      # Generate daily challenges at midnight (backup - scheduler handles this too)
      0 0 * * * webapp cd /var/app/current && php artisan challenges:generate >> /var/log/challenges.log 2>&1

commands:
  remove_old_cron:
    command: "rm -f /etc/cron.d/*.bak"
